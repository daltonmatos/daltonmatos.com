<!DOCTYPE html>
<html lang="pt-br" class="wf-firasans-n4-active wf-active">
	<head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Enable responsiveness on mobile devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    
    
    <meta name="generator" content="Hugo 0.51" />
    
    <title>O que acontece se minha Yubikey parar de funcionar? &middot; </title>
    <meta content="O que acontece se minha Yubikey parar de funcionar? - " property="og:title">
    <meta content=" - " property="og:description">
    <!-- CSS -->
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans:300,300i,400,400i|Roboto+Mono:300,300i,400,400i" rel="stylesheet">
    <link rel="stylesheet" href="https://daltonmatos.com/css/print.css" media="print">
    <link rel="stylesheet" href="https://daltonmatos.com/css/poole.css">
    <link rel="stylesheet" href="https://daltonmatos.com/css/hyde.css">
    <link rel="stylesheet" href="https://daltonmatos.com/css/syntax.css">
    <!-- Font-Awesome -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/all.js" integrity="sha384-xymdQtn1n3lH2wcu0qhcdaOpQwyoarkgLVxC/wZ5q7h9gHtxICrpcaSUfygqZGOe" crossorigin="anonymous"></script>
    
    <!-- Customised CSS -->
    <link rel="stylesheet" href="https://daltonmatos.com/css/custom.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    

	</head>
    <body class="theme-base-08 ">
        <div class="sidebar">
  <div class="container text-center ">
    <div class="sidebar-about text-center">
      <a href="https://daltonmatos.com/"><h1 class="brand"></h1></a>
       <img src="/daltonmatos.jpeg" alt="Author Image" class="img-circle headshot center"> 
      <p class="lead">
         Dalton Barreto 
      </p>
    </div>
    
<div>
	<ul class="sidebar-nav">
		
		
				<li>
					<a href="/"> <span>Home</span></a>
				</li>
				<li>
					<a href="/gpg/"> <span>GPG Public Key</span></a>
				</li>
				<li>
					<a href="/about/"> <span>About</span></a>
				</li>
		</li>
	</ul>
</div>

    <p>
      <section class="row text-center">
	
	<a href="https://twitter.com/daltonmatos"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	&nbsp;<a href="https://github.com/daltonmatos"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
	
	
</section>

    </p>
    <p class="copyright">&copy; 2018 Dalton Barreto.
      <a href="https://creativecommons.org/licenses/by/4.0">Some Rights Reserved</a>.<br/>Built with <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/htr3n/hyde-hyde">hyde-hyde</a>.
    </p>
  </div>
  <div>
  </div>
</div>

        <div class="content container">
            <div class="post">
  <h1>O que acontece se minha Yubikey parar de funcionar?</h1>
  
  <div class="col-sm-12 col-md-12">
    <span class="text-left post-date meta">
            
       
        <i class="fas fa-calendar-alt"></i> Sep 20, 2018
      
      
      
      
        
        
            <br/>
             <i class="fas fa-tags"></i>
            
            <a class="meta" href="/tags/gpg">gpg</a> 
        
            <a class="meta" href="/tags/pass">pass</a> 
        
            <a class="meta" href="/tags/yubikey">yubikey</a>
        
      
      
      <br/>
      <i class="fas fa-clock"></i> 6 min read 
      </span>  
  </div>    
  
  

<p>Continuando <a href="/tags/yubikey/">minha caminhada</a> para montar um <a href="https://daltonmatos.com/2018/09/modelos-de-seguranca-para-uso-de-smartcards/">modelo de segurança</a> onde consiga guardar meus usuários/senhas de forma segura, surge um ponto bem importante: O que acontece se meu smartcard parar de funcionar de repente?</p>

<p>Vou explicar aqui os procedimentos que seriam necessários para conseguir preparar uma nova Yubikey e voltar ao dia a dia normal.</p>

<h1 id="cópia-da-chave-que-está-no-smartcard">Cópia da chave que está no smartcard</h1>

<p>Estou assumindo aqui que existe uma cópia da chave que está no smartcard, ok? Caso a chave tenha sido gerada pelo próprio smartcard, não tem muita opção nesse momento a não ser gerar uma chave nova usando o mesmo procedimento. Mas essa opção (o smartcard ter gerado suas chaves) invalida o uso de um password manager como o <a href="https://passwordstore.org">pass</a>, já que todos os dados encriptados com a chave antiga seriam perdidos.</p>

<h2 id="múltiplas-cópias">Múltiplas cópias</h2>

<p>Uma coisa que pode te salvar em um momento de desastre é ter múltiplas cópias das coisas que você realmente considera importantes. Nesse nosso caso guardaremos múltiplas cópias da nossa chave GPG (na verdade a cópia é do keyring todo, mas isso é apenas um detalhe).</p>

<p>Duas boas opções são: Guardar uma cópia online e uma &ldquo;cópia da cópia&rdquo; offline, no seu PC de uso diário.</p>

<h3 id="mantenha-uma-cópia-online">Mantenha uma cópia online</h3>

<p>Uma das opções é ter uma cópia online, usando quaisquer serviços que você preferir. Pode ser Dropbox, Google Drive, Amazon S3 ou qualquer outro.</p>

<h3 id="cópia-guardada-no-pc">Cópia guardada no PC</h3>

<p>Outra opção é manter uma &ldquo;cópia da cópia&rdquo; no PC de uso diário. Lembrando que <strong>qualquer</strong> cópia da chave que esteja fora do smartcard está devidamente encriptada.</p>

<h1 id="o-que-fazer-em-cada-um-dos-casos">O que fazer em cada um dos casos</h1>

<p>A seguir vamos ver qual será o procedimento em caso de perda da Yubikey para cada uma das formas de armazenamento da cópia da chave GPG.</p>

<h2 id="recorrendo-à-cópia-que-está-no-pc">Recorrendo à cópia que está no PC</h2>

<p>Esse é o caso mais simples e fácil pois bastaria decriptar essa cópia e preparar uma nova Yubikey. Easy!</p>

<h3 id="pc-também-pára-em-conjunto-com-a-yubikey">PC também pára em conjunto com a Yubikey</h3>

<p>Mas e se o PC também parar de funcionar?</p>

<p>Aqui estamos em uma situação onde a cópia que estaria no PC está, de alguma forma, inacessível. Nesse caso devemos recorrer à alguma outra cópia.</p>

<p>Esse cenário pode acontecer de algumas maneiras. Uma maneira pouco provável mas possível é você perder o seu PC (HD com defeito ou outra coisa) <strong>ao mesmo tempo</strong> que você perder sua Yubikey. Aqui já conseguimos entender porque não é uma boa ideia manter sua Yubikey sempre inserida na USB do PC.</p>

<p>Uma outra situação poderia ser também a seguinte: O PC estraga e no meio tempo em que você está se preparando para consertá-lo sua Yubikey pára de funcionar.</p>

<p>Nesses dois casos você acaba na mesma situação: PC <strong>e</strong> Yubikey inacessíveis. E aí só te resta uma opção: Acessar a cópia online.</p>

<h2 id="recorrendo-a-uma-cópia-online-para-preparar-uma-nova-yubikey">Recorrendo a uma cópia online para preparar uma nova Yubikey</h2>

<p>Aqui temos uma questão interessante. Nós não sabemos a senha do serviço de armazenamento onde a cópia da chave está, afinal todas as nossas senhas ficam em nosso password manager, que por sua vez está totalmente encriptado com a chave que estamos justamente tentando obter!! Sacou o &ldquo;Lock&rdquo; em que estamos?</p>

<p>Imagina sua cópia guardada no Dropbox, mas você não sabe a senha do Dropbox afinal sempre que você precisa entrar lá você usa sua Yubikey para decriptar a senhas que estão guardada no seu password manager.</p>

<p>Nesse caso aqui só nos resta uma opção: Passar pelo processo de recuperação de senha do serviço onde nossa cópia está armazenada. Para que isso funcione é importante você ter suas configurações de recuperação de senha (email alternativo e número de telefone) devidamente atualizados, pois quando você precisar isso tem que funcionar!</p>

<p>Mas lembre-se que isso só é necessário se a cópia que fica no seu PC estiver permanentemente inacessível.</p>

<p>Passar pelo processo de recuperação de senha de <strong>uma</strong> conta ainda é melhor do que fazer isso para <strong>todas</strong> as contas. =)</p>

<h1 id="passando-pelo-processo-de-recuperação-de-conta">Passando pelo processo de recuperação de conta</h1>

<p>Geralmente para recuperar uma conta você tem duas informações registradas: email alternativo e número de celular. Quando você tem acesso a essas duas informações, a recuperação da conta é imediata. Geralmente um código é enviado para o celular e outro para o email alernativo. Mas e quando você não tem acesso a alguma dessas informações?</p>

<p>Vamos ver agora diferentes &ldquo;configuraçõe de desastre&rdquo;.</p>

<h2 id="yuikey-pc-e-celular-perdidos">Yuikey, PC e celular perdidos</h2>

<p>Nesse caso são três itens perdidos ao mesmo tempo. Aqui temos duas opções:</p>

<ol>
<li>Usamos os backup codes dessa conta, mas nesse caso temos que ter esses backup codes armazenados de forma segura e <strong>sem</strong> depender da chave GPG;</li>
<li>Ficamos sem acesso à conta por alguns dias até ir na operadora de celular e recuperar nosso número, assim basta arrumar um novo telefone e recuperar a conta usando o email alternativo e o celular.</li>
</ol>

<h2 id="yubikey-pc-celular-e-e-mail-alternativo-perdidos">Yubikey, PC, Celular e e-mail alternativo perdidos</h2>

<p>Nesse caso temos 4 itens perdidos ao mesmo tempo. Se a conta de email alternativa tiver as mesmas configurações que temos aqui (senhas gravadas no <a href="https://passwordstore.org/">pass</a>, com a <a href="https://daltonmatos.com/2018/08/usando-seu-keyring-gpg-para-guardar-sua-chave-ssh/">chave GPG em uma yubikey</a> e <a href="https://daltonmatos.com/2018/09/multi-factor-authentication-na-linha-de-comando/">MFA habilitado</a>) para efetivamente perder o acesso ao email alternativo, a pessoa dona desse email também teria que ter perdido: A yubikey, o PC (que tinha a copia da chave GPG) e o celular. Nesse caso então seriam 6 coisas a serem perdidas ao mesmo tempo: 2 Yubikeys, 2 Celulares e 2 PCs.</p>

<p>Apenas nesse caso mais extremo teríamos que passar pela recuperação de conta onde você precisa comprovar sua identidade e isso geralmente é feito entrando em contato pessoalmente com o provedor da conta que você está tentando recuperar.</p>

<p>Mas acredito que consigo conviver com a probabilidade de 6 coisas serem perdidas simultaneamente para que o acesso à minha conta principal realmente seja perdido. É sempre uma questão de escolha: Até quanto você aceita perder?</p>

<p>Sim, eu já fiz um teste a passei por todo o processo de recuperação de senha do serviço que escolhi, inclusive fiz o teste para caso não tenha mais acesso ao meu celular. Nesse caso parei no ponto onde se eu apertasse um botão, entrariam em contato comigo dentro de 5 dias úteis. Espero nunca ter que usar essa opção. Vamos confiar nas probabilidades. =D</p>

<p>De fato seria bem interessante seu eu pudesse apresentar cópias de documentos pessoais para comprovar que eu sou eu. Assim em um momento de reaver o acesso à conta, bastaria eu ir pessoalmente a algum lugar e apresentar minha carteira de motorista, por exemplo e aí teria novamente acesso à minha conta. Não achei nada a respeito disso, infelizmente.</p>

</div>
            <div class="footer">
                

    

            </div>
        </div>
        
        
    </body>
</html>
