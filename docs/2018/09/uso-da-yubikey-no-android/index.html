<!DOCTYPE html>
<html lang="pt-br" class="wf-firasans-n4-active wf-active">
	<head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Enable responsiveness on mobile devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    
    
    <meta name="generator" content="Hugo 0.51" />
    
    <title>Uso da Yubikey no Android &middot; </title>
    <meta content="Uso da Yubikey no Android - " property="og:title">
    <meta content=" - " property="og:description">
    <!-- CSS -->
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans:300,300i,400,400i|Roboto+Mono:300,300i,400,400i" rel="stylesheet">
    <link rel="stylesheet" href="https://daltonmatos.com/css/print.css" media="print">
    <link rel="stylesheet" href="https://daltonmatos.com/css/poole.css">
    <link rel="stylesheet" href="https://daltonmatos.com/css/hyde.css">
    <link rel="stylesheet" href="https://daltonmatos.com/css/syntax.css">
    <!-- Font-Awesome -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/all.js" integrity="sha384-xymdQtn1n3lH2wcu0qhcdaOpQwyoarkgLVxC/wZ5q7h9gHtxICrpcaSUfygqZGOe" crossorigin="anonymous"></script>
    
    <!-- Customised CSS -->
    <link rel="stylesheet" href="https://daltonmatos.com/css/custom.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    

	</head>
    <body class="theme-base-08 ">
        <div class="sidebar">
  <div class="container text-center ">
    <div class="sidebar-about text-center">
      <a href="https://daltonmatos.com/"><h1 class="brand"></h1></a>
       <img src="/daltonmatos.jpeg" alt="Author Image" class="img-circle headshot center"> 
      <p class="lead">
         Dalton Barreto 
      </p>
    </div>
    
<div>
	<ul class="sidebar-nav">
		
		
				<li>
					<a href="/"> <span>Home</span></a>
				</li>
				<li>
					<a href="/gpg/"> <span>GPG Public Key</span></a>
				</li>
				<li>
					<a href="/talks/"> <span>Palestras</span></a>
				</li>
				<li>
					<a href="/about/"> <span>About</span></a>
				</li>
		</li>
	</ul>
</div>

    <p>
      <section class="row text-center">
	
	<a href="https://twitter.com/daltonmatos"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	&nbsp;<a href="https://github.com/daltonmatos"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
	
	
</section>

    </p>
    <p class="copyright">&copy; 2018 Dalton Barreto.
      <a href="https://creativecommons.org/licenses/by/4.0">Some Rights Reserved</a>.<br/>Built with <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/htr3n/hyde-hyde">hyde-hyde</a>.
    </p>
  </div>
  <div>
  </div>
</div>

        <div class="content container">
            <div class="post">
  <h1>Uso da Yubikey no Android</h1>
  
  <div class="col-sm-12 col-md-12">
    <span class="text-left post-date meta">
            
       
        <i class="fas fa-calendar-alt"></i> Sep 29, 2018
      
      
      
      
        
        
            <br/>
             <i class="fas fa-tags"></i>
            
            <a class="meta" href="/tags/gpg">gpg</a> 
        
            <a class="meta" href="/tags/pass">pass</a> 
        
            <a class="meta" href="/tags/yubikey">yubikey</a>
        
      
      
      <br/>
      <i class="fas fa-clock"></i> 3 min read 
      </span>  
  </div>    
  
  

<p>O último ponto que faltava na minha migração para um novo password manager era poder acessar meus dados usando o celular.</p>

<p>Aqui vou mostrar cada um dos apps que uso para poder ter o celular como uma ferramenta completa para poder usar meu smartcard.</p>

<h1 id="suporte-à-yubikey">Suporte à yubikey</h1>

<p>Os smartcards da <a href="https://www.yubico.com/products/yubikey-hardware/">Yubico</a> já são naturalmente suportados pelo Android. Os <a href="https://www.yubico.com/products/yubikey-for-mobile/">smartcards que possuem NFC</a> têm suporte ainda melhor, pois basta aproximar o telefone do smartcard para que eles se comuniquem.</p>

<p>No meu caso tenho uma <a href="https://www.yubico.com/product/yubikey-4-series/#yubikey-4-nano">Yubikey USB-A</a>, então uso um adaptador USB-A &gt; USB-C para poder usá-la no celular. Funciona muito bem.</p>

<p><strong>Nota</strong>: Acredito que para funcionar plugado na USB do celular o aparelho precisa ter suporte a <a href="https://en.wikipedia.org/wiki/USB_On-The-Go">USB OTG</a>, que é o meu caso.</p>

<h1 id="open-keychain">Open Keychain</h1>

<p>O <a href="https://www.openkeychain.org/">OpenKeyChain</a> é o responsável por suportar o smartcard. Pense nele como uma espécie de &ldquo;driver&rdquo;. Além de implementar suporte genérico ao uso de um smartcard, ele também implementa o necessário para que você consiga usar as funcionalidades relacionadas à chave GPG, ou seja, ele é capaz de assinar conteúdos, encriptar/decriptar dados usando a chave privada que está no smartcard.</p>

<p>Como o nome já diz ele é uma Keychain, isso significa que você pode importar chaves públicas de outras pessoas e isso te dá a possibilidade de trocar conteúdo encriptado com elas.</p>

<p>Além disso ele expõe uma API pública, dessa forma outros apps podem usar essa API e por isso podem também dar suporte ao uso de smartcards. É o caso do TermBot, que veremos a seguir.</p>

<h1 id="termbot">TermBot</h1>

<p>Como tenho minha <a href="/2018/08/usando-seu-keyring-gpg-para-guardar-sua-chave-ssh/">chave SSH dentro do smartcard</a> seria ideal poder ter um cliente SSH que fosse capaz de usar essa chave.</p>

<p>Existe um app que faz isso e é o <a href="https://play.google.com/store/apps/details?id=org.sufficientlysecure.termbot">TermBot</a>. O que ele faz, na verdade, é falar com a API do OpenKeyChain. Dessa forma tenho como fazer SSH para máquinas remotas usando a mesma chave que está dentro do smartcard.</p>

<h1 id="password-store">Password Store</h1>

<p>O App <a href="https://github.com/zeapo/Android-Password-Store">PasswordStore</a> é quem sabe ler os dados gravados <a href="/2018/09/so-long-lastpass-and-thank-you-for-all-the-fish/">no password manager que uso</a>, o <a href="https://passwordstore.org">pass</a>.</p>

<p>Com esse App consigo sincronizar todos os dados de senhas, assim não preciso sempre do PC para pegar uma senha caso precise me logar em algum dos sites usando o celular.</p>

<p>Diferente do <code>pass</code>, esse app não possui suporte a plugins o que significa que não posso, através dele, <a href="/2018/09/multi-factor-authentication-na-linha-de-comando/">gerar os tokens MFA que consigo gerar na linha de comando</a> e no <a href="https://github.com/browserpass/browserpass">browser</a>.</p>

<p>Isso significa que, nesses casos onde preciso de um token MFA tenho então que usar um Authentication App, o que torna tudo muito curioso pois agora só preciso do App que gera o token quando estou logando em uma conta <strong>usando o próprio celular</strong>.</p>

<p>O que eu estava acostumado a fazer era sempre pegar o celular quando estava logando em uma conta <strong>usando o PC</strong>. Agora consigo fazer todo o fluxo (desde preencher usuário/senha até preencher o token MFA) usando apenas o PC, o que é de certa forma libertador pois não dependo mais do celular. Inclusive posso eventualmente perdê-lo sem <strong>nenhum prejuízo</strong> para o meu fluxo do dia-a-dia.</p>

<p>Com esses apps que citei acima consigo, no celular: Assinar conteúdos, encriptar, decriptar, autenticar em servidores SSH e ler todas as minhas senhas do meu password manager. Tudo isso usando a chave privada que está dentro do smartcard.</p>

</div>
            <div class="footer">
                

    

            </div>
        </div>
        
        
    </body>
</html>
